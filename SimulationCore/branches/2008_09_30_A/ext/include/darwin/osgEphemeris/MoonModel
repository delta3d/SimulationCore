/* -*-c++-*- OpenSceneGraph - Ephemeris Model Copyright (C) 2005 Don Burns
 *
 * This library is open source and may be redistributed and/or modified under
 * the terms of the OpenSceneGraph Public License (OSGPL) version 0.0 or
 * (at your option) any later version.  The full license is in LICENSE file
 * included with this distribution, and on the openscenegraph.org website.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * OpenSceneGraph Public License for more details.
*/
#ifndef OSG_EPHEMERIS_MOON_MODEL_DEF
#define OSG_EPHEMERIS_MOON_MODEL_DEF

#include <string>
#include <osgEphemeris/Sphere>

namespace osgEphemeris {

    /** \class MoonModel
        \brief The model of the Moon.
      */

class MoonModel : public Sphere
{
    public:
        /**
          Default constructor
          */
        MoonModel();

        /**
          Return the size of the moon's radius
          */
        static double getMoonRadius() { return _moonRadius; }
        /**
          Set the position of the Sun with respect to the view.  This position
          is used to determine the lighting direction parameters, resulting in
          the correct representation of the phases of the moon.
          */
        void setSunPosition( osg::Vec3 sun );

    private:

        static const double _moonRadius;
        static std::string _vertexShaderProgram;
        static std::string _fragmentShaderProgram;

        int _baseTextureUnit;
        int _bumpTextureUnit;

        osg::ref_ptr<osg::Uniform> _light;

        static unsigned int  _moonImageLoLodWidth, _moonImageLoLodHeight;
        static unsigned int  _moonImageInternalTextureFormat, _moonImagePixelFormat;
        static unsigned char _moonImageLoLodData[];
        static unsigned int  _moonImageHiLodWidth, _moonImageHiLodHeight;
        static unsigned char _moonImageHiLodData[];

        static unsigned int  _moonNormalImageLoLodWidth, _moonNormalImageLoLodHeight;
        static unsigned int  _moonNormalImageInternalTextureFormat, _moonNormalImagePixelFormat;
        static unsigned char _moonNormalImageLoLodData[];
        static unsigned int  _moonNormalImageHiLodWidth, _moonNormalImageHiLodHeight;
        static unsigned char _moonNormalImageHiLodData[];

        void _buildStateSet();
};

}

#endif
